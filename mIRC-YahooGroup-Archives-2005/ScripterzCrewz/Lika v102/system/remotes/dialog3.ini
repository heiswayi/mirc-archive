[script]
n0=;###########
n1=;TOOLBAR MANAGER
n2=;##############
n3=
n4=alias tbe $wdialog(tbe)
n5=dialog tbe {
n6=  title "Toolbar Manager [/tbe]"
n7=  size -1 -1 400 200
n8=  icon system\images\toolbar.ico, 0
n9=  list 1, 4 4 392 192, size
n10=  text $name, 99, 29 164 38 16, hide
n11=
n12=}
n13=alias load.tbe {
n14=  did -r tbe 1  
n15=  did -i tbe 1 1 clearicons list
n16=  var %a = 1,%b = 1
n17=  while (%a <= $lines($tb(dir))) {
n18=    var %t = $read($tb(dir),%a)
n19=    if (%t == Break) { did -a tbe 1 - $chr(9) - $chr(9) - | inc %a }
n20=    else {
n21=      did -i tbe 1 1 seticon list 0 $gettok(%t,1,169)
n22=      did -a tbe 1 0 %b $gettok(%t,1,169) $chr(9) $gettok(%t,2,169) $chr(9) $gettok(%t,3,169) 
n23=      inc %a | inc %b
n24=    }
n25=  }
n26=}
n27=
n28=on *:dialog:tbe:init:0:{
n29=  mdx.fonts $dname 1,2,3,99
n30=  mdx.buttons $dname 2,3,5,6,
n31=  mdx SetControlMDX $dname 1 listview icon smallicons alignleft rowselect showsel single labeltip $rcon(display,list.style) > $views 
n32=  did -i $dname 1 1 headerdims 140:1 100:2 100:3
n33=  did -i $dname 1 1 headertext Icon $+ $chr(9) $+ Tooltip $+ $chr(9) $+ Command 
n34=  load.tbe
n35=}
n36=alias tbe.popc {
n37=  var %a = $calc($2 - 1 )
n38=  var %t = $read($tb(dir),%a)
n39=  if ($1 == rem) { if (%a > 3) { write -dl $+ %a $tb(dir) | $tb(refresh) | load.tbe } }
n40=  if ($1 == up) { if (($did(tbe,1).sel isnum) && (%a > 4)) { set %tb.temp %t | write -dl $+ %a $tb(dir) | write $+(-il,$calc(%a - 1)) $tb(dir) %tb.temp  | $tb(refresh) | load.tbe | did -c tbe 1 $calc(%a) | unset %tb.temp } }
n41=  if ($1 == dn) { if (($did(tbe,1).sel isnum) && (%a > 3)) { set %tb.temp %t | write -dl $+ %a $tb(dir) | write $+(-il,$calc(%a + 1)) $tb(dir) %tb.temp | $tb(refresh) | load.tbe | did -c tbe 1 $calc(%a + 2) | unset %tb.temp } }
n42=
n43=}
n44=on *:dialog:tbe:sclick:*:{
n45=  if ($did == 1) {
n46=    if (rclick != $gettok($did($dname,1,1),1,32)) halt
n47=    popups New tbe 12 16
n48=    pop.item tbe Move Up $cr tbe.popc up $did($dname,1).sel
n49=    pop.item tbe Move Dn $cr tbe.popc dn $did($dname,1).sel
n50=    pop.item tbe 
n51=    pop.item tbe Add  $cr addtb
n52=    pop.item tbe Rem $cr tbe.popc rem $did($dname,1).sel
n53=    pop.item tbe 
n54=    pop.item tbe Options  $cr tbo
n55=    popit tbe $mouse.dx $mouse.dy
n56=  }
n57=
n58=}
n59=alias addtb $wdialog(addtb)
n60=dialog addtb {
n61=  title "Add Object [/addtb]"
n62=  size -1 -1 262 147
n63=  icon system\images\toolbar.ico, 0
n64=  box "", 1, 5 0 251 109
n65=  text "Icon:", 2, 18 42 25 16
n66=  text "Tooltip:", 4, 18 63 36 16
n67=  text "Command:", 6, 18 85 51 15
n68=  edit "", 3, 87 36 141 22, autohs
n69=  edit "", 5, 87 58 158 22, autohs
n70=  edit "", 7, 87 80 158 22
n71=  button "Add", 8, 98 117 75 25, ok
n72=  button "Cancel", 9, 181 117 75 25, cancel
n73=  text $name, 24, 21 122 38 16
n74=  button "?", 26, 229 37 15 19
n75=  radio "Button", 10, 50 15 55 16
n76=  radio "Break", 11, 128 15 54 16
n77=}
n78=on *:dialog:addtb:init:0:{ 
n79=  mdx.fonts $dname 1,2,4,6,3,5,7,8,9,24,26,10,11
n80=  mdx.buttons $dname 8,9,26
n81=  did -c $dname 10 
n82=}
n83=on *:dialog:addtb:sclick:*:{ 
n84=  if ($did == 10) { did -e $dname 3,5,7 }
n85=  if ($did == 11) { did -b $dname 3,5,7 }
n86=  if ($did == 26) { did -ra $dname 3 $$sfile($mircdirsystem\images\,Select an Icon,Select) }
n87=  if ($did == 8) {
n88=    if ($did($dname,10).state == 1) { if ($did(3)) && ($did(5)) && ($did(7)) { write $tb(dir) $+($did(3),©,$did(5),©,$did(7)) } }
n89=    else { write $tb(dir) Break  }
n90=    tb refresh | load.tbe
n91=  }
n92=}
n93=;###########
n94=;TOOLBAR
n95=;##############
n96=alias tb.update {
n97=  if ($scid($activecid).server) var %l = $rcon(lag,$scid($activecid).network)
n98=  if (!$dialog(tbar)) { halt }
n99=  else {
n100=    if ( $scid($activecid).status = connecting || $scid($activecid).status = connected ) {
n101=      did -o tbar 2 2 $iif($rcon(display,tb.dropd) == on,+v) 2 $chr(9) $+ Disconnect $chr(9) $+ disconnect 
n102=    }
n103=    else {
n104=      did -o tbar 2 2 $iif($rcon(display,tb.dropd) == on,+v) 1 $chr(9) $+ Connect $chr(9) $+ rc
n105=    }
n106=    mdx MoveControl tbar 2 * * * 4
n107=  }
n108=
n109=  if ($rcon(lag,tb.lag) == on) {
n110=    did -v tbar 3,4,6  | $tb(lag,$iif(%l,%l,?.??))
n111=    if (($rcon(lag,tb.dock) == left) && ($1 == lag)) {
n112=      var %a = $window(-2).w
n113=      mdx MoveControl tbar 2 100 * $calc(%a - 150) 4
n114=      mdx MoveControl tbar 4  8  * * *
n115=      mdx MoveControl tbar 3  8 * * *
n116=      mdx MoveControl tbar 6  48 * * *
n117=    }
n118=    elseif (($rcon(lag,tb.dock) == right) && ($1 == lag)) {
n119=      var %a = $window(-2).w
n120=      mdx MoveControl tbar 2 4 * $calc(%a - 125) 4
n121=      mdx MoveControl tbar 4  $calc(%a - 100) * * *
n122=      mdx MoveControl tbar 3  $calc(%a - 100) * * *
n123=      mdx MoveControl tbar 6  $calc(%a - 60) * * *
n124=
n125=
n126=    }
n127=
n128=  }
n129=
n130=  else { did -h tbar 3,4,6 } 
n131=}
n132=
n133=;alias tbar tb $1-
n134=alias tb {
n135=  if (($1 == open) || ($1 == on)) { tbar | return }
n136=  if ($1 == dir) { return $+($prodir,toolbar.txt) }
n137=  if ($1 == lag) { if ($dialog(tbar)) { did -ra tbar 6 $+($2,secs) | var %a = $calc($2 * 100) | did -ra tbar 3 $iif(%a < 30,%a,%a) 0 100 | return } | return }
n138=  if ($1 == edit) { tbe | return }
n139=  if ($1 == refresh) { if ($dialog(tbar)) { dialog -c tbar | tbar | $iif($dialog(tbe),dialog -v tbe)) | return } | return }
n140=  if (($1 == close)  || ($1 == off))  { $wcon(display,tb,off) | .timer 1 0 dialog -c tbar |  return }
n141=  else { echo help> tb options; /tb [open|edit|refresh|close] }
n142=}
n143=alias tbar { 
n144=  if (!$dialog(tbar)) { $wcon(display,tb,on) | dialog -m tbar tbar } 
n145=
n146=}
n147=
n148=dialog tbar {
n149=  title "tbar"
n150=  size -1 -1 9000 5
n151=  button "hh",98, 50 50 20 20,ok
n152=  list 2, 4 4 500 12, size
n153=  text "",3, 675 17 75 9, hide
n154=  text "Lag:",4, 675 5 20 12, hide
n155=  box "", 5, -5 -5 1500 8
n156=  text "???secs",6, 716 5 40 12, hide
n157=  box "", 99, 94 0 2 26, hide
n158=
n159=
n160=}
n161=alias blah12 echo a $mircdir
n162=alias sendkeys { showmirc -s |  dll system\dll\sendkey.dll $$1 $$2 }
n163=
n164=;mdx SetColor $dname 173,174,212,213,214,281 background $rgb(222,219,214)
n165=;mdx SetColor $dname 174,213,212 textbg $rgb(222,219,214)
n166=
n167=on *:dialog:tbar:init:0:{
n168=  mdx.fonts $dname 3
n169=  mdx SetFont $dname 4,6  + 11 500 Tahoma
n170=  var %dg = $dname
n171=  ;dll $+(",$mircdir,system\dll\rebar.dll,") HideToolbar .
n172=  ;dll $+(",$mircdir,system\dll\rebar.dll,") Dock $dialog($dname).hwnd > top
n173=
n174=  if ($rcon(display,tb.bgstatus) == on) {
n175=    mdx SetDialog $dname bgcolor $rcon(display,tb.bgcolor)
n176=    mdx SetColor $dname 2,5 background $rcon(display,tb.bgcolor)
n177=    mdx SetColor $dname 3,4,6 textbg $rcon(display,tb.bgcolor)
n178=  }
n179=
n180=
n181=  mdock DockToolbar $dialog($dname).hwnd
n182=
n183=
n184=  mdx SetDialog %dg style tool
n185=  mdx SetBorderStyle 2 
n186=  mdx SetControlMDX %dg 2 ToolBar nodivider arrows $iif($rcon(display,tb.flat) == on,flat) wrap > $mdbars
n187=  did -i %dg 2 1 bmpsize 16 16
n188=  if ($rcon(lag,tb.lag) == on) { did -v $dname 3,4,6 }
n189=  mdx SetControlMDX %dg 3 ProgressBar smooth > $mdgen
n190=  did -ra %dg 3 barcolor $rcon(lag,color)
n191=  var %dg = tbar 
n192=  did -r %dg 2 |  did -i %dg 2 1 clearicons list
n193=  var %d =  did -i %dg 2 1 setimage +nhd icon small 
n194=
n195=  %d $gettok($read($tb(dir),1),1,169) 
n196=  %d $gettok($read($tb(dir),2),1,169) 
n197=  did -a %dg 2 $iif($rcon(display,tb.dropd) == on,+v) 1 $chr(9) Connect $chr(9) rc
n198=
n199=  var %a = 3,%b = 3
n200=  while (%a <= $lines($tb(dir))) {
n201=    var %t = $read($tb(dir),%a) 
n202=    if (%t == Break) { did -a %dg 2 - | inc %a  }
n203=
n204=    else { 
n205=      %d $gettok(%t,1,169) 
n206=      did -a %dg 2 %b $chr(9) $+ $gettok(%t,2,169) $+ $chr(9) $+ $gettok(%t,3,169)  
n207=      inc %a | inc %b 
n208=    }
n209=  }
n210=
n211=  if ($rcon(display,tb.scheme) == on) { did -i $dname 2 1 setscheme $rcon(display,tb.schemeH) $rcon(display,tb.schemeS) }
n212=
n213=  tb.update
n214=  dialog -s tbar 8 0 99999 4
n215=
n216=
n217=}
n218=;did -a $dname 2 3 $chr(9) $+ mIRC Options $+ $chr(9) $+ sendkeys ALT o
n219=
n220=on *:dialog:tbar:sclick:2:{ var %c = $gettok($did($dname,2).seltext,3,9) | 
n221=
n222=  if (%c == disconnect) { scid $activecid disconnect } | elseif (%c) { %c  }
n223=}
n224=on *:dialog:tbar:dclick:2: {
n225=  popups New tbar 12 12
n226=  var %a = 1
n227=  while (%a < 10) {
n228=    pop.item tbar $rcon(recent,%a) $cr scid $activecid server $rcon(recent,%a) 
n229=    inc %a
n230=  }
n231=  popit tbar $mouse.dx $mouse.dy
n232=}
n233=
n234=
n235=
n236=
n237=;###########
n238=;VOLUME
n239=;##############
n240=alias volume { $wdialog(vol) }
n241=dialog vol {
n242=  title "Volume [/volume]"
n243=  size -1 -1 179 187
n244=  icon system\images\vol.ico,0
n245=  box "Wave", 41, 64 3 51 178
n246=  text "-", 42, 72 75 4 13
n247=  text "¯", 43, 73 124 8 13
n248=  text "-", 44, 99 75 4 13
n249=  text "¯", 49, 99 124 8 13
n250=  check "Mute", 4, 68 153 44 20
n251=  scroll "", 3, 81 22 16 119, range 65535 
n252=  text "¯", 56, 72 36 6 16
n253=  text "¯", 57, 99 36 8 16
n254=  box "Midi", 58, 121 3 52 178
n255=  text "-", 59, 129 75 4 13
n256=  text "¯", 60, 129 124 7 13
n257=  text "-", 61, 156 75 4 13
n258=  text "¯", 66, 156 124 8 13
n259=  check "Mute", 6, 126 153 44 20
n260=  scroll "", 5, 138 22 16 119, range 65535 
n261=  text "¯", 73, 129 36 6 16
n262=  text "¯", 74, 156 36 8 16
n263=  button "", 75, 112 70 11 11, hide ok
n264=  box "Master", 76, 6 3 52 178
n265=  text "-", 78, 14 75 4 13
n266=  text "¯", 80, 41 124 8 13
n267=  text "-", 82, 41 75 4 13
n268=  text "¯", 85, 41 36 8 16
n269=  check "Mute", 2, 10 153 44 20
n270=  text "¯", 88, 14 36 6 16
n271=  scroll "", 1, 23 22 16 119, range 65535 
n272=  text "¯", 92, 15 124 8 13
n273=}
n274=on *:dialog:vol:*:*:{
n275=  if ($devent == init) { 
n276=    did -c $dname 1 $calc(65535 - $vol(master)) | did -c $dname 3 $calc(65535 - $vol(wave)) | did -c $dname 5 $calc(65535 - $vol(midi)) 
n277=    if ($vol(master).mute) did -c $dname 2 | if ($vol(wave).mute) did -c $dname 4 | if ($vol(midi).mute) did -c $dname 6 
n278=  }
n279=  if ($devent == scroll) { if ($did == 1) vol -v $calc(65535 - $did($dname,1).sel) | if ($did == 3) vol -w $calc(65535 - $did($dname,3).sel) | if ($did == 5) vol -m $calc(65535 - $did($dname,5).sel) }
n280=  if ($devent == sclick) { if ($did == 2) { $iif($did($dname,2).state == 1,vol -vu1,vol -vu2)  } | if ($did == 4) { $iif($did($dname,4).state == 1,vol -wu1,vol -wu2)  } | if ($did == 6) { $iif($did($dname,6).state == 1,vol -mu1,vol -mu2) } }
n281=}
n282=
n283=;###########
n284=;MP3 PLAYER
n285=;##############
n286=
n287=alias sc_start {
n288=
n289=  var %r return,%e echo $color(info) -ea * /sc_start:,%c did -r $1-2
n290=  if $isid { %e incorrect usage | %r }
n291=  if !$5 { %e insufficient parameters | %r }
n292=  if !$dialog($1) { %e no such dialog | %r }
n293=  ;  if $4 != l && $4 != r { %e invalid direction | %r }
n294=
n295=  var %x $timer(0)
n296=  while %x {
n297=    if $+(sc_,$1,_,$2,_*) iswm $timer(%x) { .timer $+ $ifmatch off | %c | break }
n298=    dec %x
n299=  }
n300=  var %a did -a $1-2,%n $+($iif($4 = l,$6-),$chr(160),$iif($3 > $len($6-),$str($chr(160),$calc($3 - $len($6-)))),$iif($4 = r,$6-)),%x 1
n301=  %a %n
n302=  while %x <= $len(%n) {
n303=    $+(.timersc_,$1,_,$2,_,%x) -m 1 $calc($5*%x) %c $chr(124) %a $right(%n,$iif($4 = l,-) $+ %x) $+ $left(%n,$iif($4 = r,-) $+ %x) $iif(!$calc($len(%n)-%x),$chr(124) sc_start $1-)
n304=    inc %x
n305=  }
n306=}
n307=
n308=
n309=alias mp3 jukebox
n310=alias mp3.color { $wdialog2(mp3color,colorsetter) }
n311=alias jukebox { balloon Jukebox > Successfully loaded jukebox. | $wdialog(mp3) }
n312=dialog mp3 {
n313=  title "jukebox"
n314=  size -1 -1 255 364
n315=  option pixels
n316=  icon system\images\mp3.ico, 0
n317=  text "", 10, 2 3 250 38
n318=  text "", 1, 75 7 169 14
n319=  box "", 7, 0 -5 255 97
n320=  scroll "", 6, 5 43 243 16, range 0 100 horizontal
n321=  list 8, 7 63 130 15
n322=  list 9, 144 60 90 15
n323=  text "Length:", 50, 75 25 40 15
n324=  text "n/a", 4, 200 25 39 16
n325=  button "Positioner", 99, 1 1 1 1, hide
n326=  text "Bitrate:", 51, 159 25 40 16
n327=  text "n/a", 3, 122 25 30 15
n328=  list 18, -2 96 257 269, size
n329=  button "", 5, 133 209 75 25, hide ok cancel
n330=  text "", 2, 10 8 56 28
n331=}
n332=
n333=
n334=alias mp3.seeker { 
n335=  var %a = $calc( ( $xtime($insong.fname,nn).total * 60 ) + $xtime($insong.fname,ss).total )
n336=  var %b = $+(.,$1)
n337=  var %c = $calc(%a * %b)
n338=  return $aatime(%c)
n339=}
n340=alias aatime { 
n341=  if ($calc($1 / 60) < 1) { return 00: $+ $round($1,0) }
n342=  else {
n343=    var %a = $int($calc($1 / 60))
n344=    var %b = $round($calc($1 % 60),0)
n345=    var %m = $iif(%a < 10,$+(0,%a),%a)
n346=    var %s = $iif(%b < 10,$+(0,%b),%b)
n347=    return %m $+ : $+ %s
n348=  } 
n349=}
n350=on *:dialog:*:close:mp3:$+(.timersc_,$dname,*) off
n351=on *:dialog:mp3:scroll:6:{ 
n352=  var %a = $round($calc($calc($did($dname,6).sel / 100) * $insong.length),0)
n353=  var %b = $int($calc((%a / $insong.length) *100))
n354=  var %pct = $iif(%b < 10,$+(0,%b),%b)
n355=  if ($insong) splay seek  %a
n356=  dialog -t $dname  Jukebox - $mp3.seeker(%pct) - $+(%pct,%)
n357=}
n358=alias mp3.s { return $rcon(mp3,style) }
n359=alias jb.time { 
n360=  if ($dialog(mp3)) { 
n361=    if ($insong == $true) { 
n362=      did -ec mp3 6 $calc($calc($insong.pos / $insong.length) * 100) 
n363=      did -ra mp3 2 $xtime(nn:ss).elapsed 
n364=      did -ra mp3 3 $xtime($insong.fname,nn:ss).total
n365=      did -ra mp3 4 $mp3($insong.fname).bitrate $+ kbps
n366=      ;did -ra mp3 5 $bytes($file($shortfn($insong.fname)).size).suf
n367=
n368=    } 
n369=    else { 
n370=      ; did -ra mp3 1 Currently there is no mp3 playing. 
n371=      dialog -t mp3 Jukebox
n372=      ;did -ra mp3 3,4,5 n/a 
n373=      did -ra mp3 2 00:00 
n374=      did -b mp3 6
n375=      $wcon(mp3,stat,off)
n376=    } 
n377=    did -i mp3 18 1 setbkg color $rcon(mp3,bg) 
n378=    did -i mp3 18 1 settxt color $rcon(mp3,text)
n379=    did -i mp3 18 1 settxt bgcolor $rcon(mp3,textbg)
n380=
n381=    mdx SetColor mp3 1,2,51,3,50,4 text $rcon(mp3,text)
n382=    mdx SetColor mp3 1,2,51,3,50,4,10 background $rcon(mp3,bg)
n383=    mdx SetColor mp3 1,2,51,3,50,4,10 textbg $rcon(mp3,textbg)
n384=    dialog -t mp3 Jukebox 
n385=  } 
n386=  else { .timerMP3 off | splay stop | $wcon(mp3,stat,off) } 
n387=}
n388=on *:dialog:mp3:init:0:{
n389=  mdx.fonts $dname 52,21
n390=  if ($dialog(vol)) did -c $dname 15 
n391=  splay stop
n392=  .timerMP3 0 1 jb.time
n393=  mdx SetDialog $dname style title border sysmenu minbox
n394=  mdx SetControlMDX $dname 99 positioner minbox > $mddlg 
n395=
n396=  mdx SetFont $dname 3,4,50,51,18  + 12 500 Tahoma
n397=  mdx SetFont $dname 9 + 18 500 WebDings
n398=  mdx SetFont $dname 2 +b 23 500 Tahoma
n399=  mdx SetControlMDX $dname 18 listview $rcon(display,list.style) sortascending rowselect  > $views 
n400=  did -i $dname 18 1 headerdims 235:1 0:2
n401=  did -i $dname 18 1 headertext Filename $+ $chr(9) $+ Dir
n402=
n403=
n404=
n405=  mdx SetControlMDX $dname 8,9 ToolBar nodivider list flat > $mdbars
n406=  did -i $dname 8 1 bmpsize 14 14
n407=  did -i $dname 9 1 bmpsize 0 0
n408=  mdx SetBorderStyle 8,9
n409=  var %d =   did -i $dname 8 1 setimage +nhd icon small
n410=  %d 0,system\images\mp3.icl
n411=  %d 4,system\images\mp3.icl
n412=  %d 3,system\images\mp3.icl
n413=  %d 2,system\images\mp3.icl
n414=  %d 1,system\images\mp3.icl
n415=
n416=  did -a $dname 8 +a 1 $chr(9) Previous $chr(9) mp3.bar prev
n417=  did -a $dname 8 +a 2 $chr(9) Play $chr(9) mp3.bar play
n418=  did -a $dname 8 +a 3 $chr(9) Stop $chr(9) mp3.bar stop
n419=  did -a $dname 8 +ac 4 $chr(9) Pause $chr(9) mp3.bar pause
n420=  did -a $dname 8 +a 5 $chr(9) Next $chr(9) mp3.bar next 
n421=  did -a $dname 8 -
n422=  if ($rcon(mp3,p-list) == off) { dialog -s $dname -1 -1 255 92 } | else { var %x = yes }
n423=  did -a $dname 9 +a 0 5 $chr(9) Play a song $chr(9) mp3.bar choose
n424=  did -a $dname 9 $+(+,$iif(%x == yes,x),ac) 0  $chr(9) Toggle Playlist $chr(9) mp3.bar list
n425=
n426=  jb.load
n427=}
n428=alias mp3.bar { 
n429=  if ($2 == prev) { $iif($rcon(mp3,shuffle) == on,mp3.shuf,$iif($rcon(mp3,play) == 1,halt,mp3.play ps -1 $jb.mp3(-1,2))) } 
n430=  if ($2 == play) { mp3.play -s }
n431=  if ($2 == stop) { splay stop }
n432=  if ($2 == pause) {  if ($rcon(mp3,stat) == play) && ($insong == $true) { splay pause | $wcon(mp3,stat,pause) } | elseif ($insong == $true) { splay resume | $wcon(mp3,stat,play) } }
n433=  if ($2 == next) { $iif($rcon(mp3,shuffle) == on,mp3.shuf,$iif($rcon(mp3,play) == $calc($did(mp3,18).lines - 1),halt,mp3.play ps 1 $jb.mp3(1,1))) }
n434=  if ($2 == choose) { mp3.play $$file="Select a mp3 to play" }
n435=  if ($2 == list) { if ($rcon(mp3,p-list) == off) { $wcon(mp3,p-list,on) | dialog -s mp3 -1 -1 255 364 } | else { $wcon(mp3,p-list,off) | dialog -s mp3 -1 -1 255 92 } }
n436=
n437=}
n438=alias jb.load { did -r mp3 18 | var %w = 1 | while ($read($+($prodir,playlist.txt),%w))  { did -a mp3 18 0 0 0 0 $read($+($prodir,playlist.txt),%w) | inc %w } | jb.sort } 
n439=on *:dialog:mp3:sclick:*:{
n440=  if ($did == 8)  { var %a = $gettok($did($dname,8).seltext,3,9) | %a }
n441=  if ($did == 9)  { var %a = $gettok($did($dname,9).seltext,3,9) | %a }
n442=  if ($did == 18) { 
n443=    var %q = $right($gettok($did($dname,18).seltext,1,9),-11)
n444=    if (rclick != $gettok($did($dname,18,1),1,32)) halt
n445=    popups New mp3.pop 12 16
n446=    pop.item mp3.pop Play  $cr mp3.popc play
n447=    pop.item mp3.pop 
n448=    pop.item mp3.pop +> Playlist $cr mp3.pop1
n449=    popups New mp3.pop1 12 16
n450=    pop.item mp3.pop1 Add File $cr mp3.popc addfile
n451=    pop.item mp3.pop1 Add Dir $cr mp3.popc add-dir
n452=    pop.item mp3.pop1 
n453=    pop.item mp3.pop1 Rem File $cr mp3.popc rem
n454=    pop.item mp3.pop1 Clear all $cr mp3.popc clear
n455=    pop.item mp3.pop1 
n456=    pop.item mp3.pop1 Load $cr mp3.popc load
n457=    pop.item mp3.pop1 Save $cr mp3.popc save
n458=    pop.item mp3.pop +> Options $cr mp3.pop2
n459=    popups New mp3.pop2 12 16
n460=    pop.item mp3.pop2 Colors $cr mp3.color
n461=    pop.item mp3.pop2 Volume $cr  volume
n462=    pop.item mp3.pop2 Misc $cr  mp3.misc
n463=    pop.item mp3.pop2 Search $cr  search
n464=    pop.item mp3.pop 
n465=    pop.item mp3.pop $+($iif($rcon(mp3,shuffle) == on,+x)) Shuffle $cr mp3.popc shuffle
n466=    popit mp3.pop $mouse.dx $mouse.dy
n467=  }
n468=}
n469=alias mp3.popc {
n470=  if ($1 == play) { mp3.play -s }
n471=  if ($1 == addfile) { var %file = $$file="Add a File to the Playlist" | if (%file) { write $+($prodir,playlist.txt) $nopath(%file) $chr(9) $remove(%file,$nopath(%file)) | jb.load } }
n472=  if ($1 == add-dir) { var %dir = $sdir="Add a Directory to the Playlist" | if (%dir) { write $+($prodir,playlist.txt) $findfile(%dir,*.mp3,0,write $+($prodir,playlist.txt) $nopath($1-) $chr(9) $remove($1-,$nopath($1-))) | write -d $+($prodir,playlist.txt) | jb.load }  }
n473=  if ($1 == rem) { write -ds $+ " $+ $jb.text $+ " $+($prodir,playlist.txt) | jb.load }
n474=  if ($1 == clear) { var %d = $$?!="Delete All? " | if (%d) { write -c $+($prodir,playlist.txt) | jb.load } }
n475=  if ($1 == shuffle) {  $wcon(mp3,shuffle,$iif($rcon(mp3,shuffle) == on,off,on))  }
n476=  if ($1 == load) { $jb.file(load) | jb.load }
n477=  if ($1 == save) { $jb.file(save) }
n478=}
n479=
n480=
n481=alias jb.rp { return $read($+($prodir,playlist.txt),%a) }
n482=alias jb.file {
n483=  if ($1 == save) { var %w = $$sfile(*.txt,Save as a '.txt' file,Save) | var %r = $+($prodir,playlist.txt) }
n484=  if ($1 == load) { var %w = $+($prodir,playlist.txt) | var %r = $iif(!$2,$$sfile(*.txt,Select a .txt file,Load),$2) | $wcon(mp3,rplist,%r) }
n485=  var %a = 1
n486=  while (%a <= $lines(%r)) {
n487=    if (%a = 1) { write -c %w $read(%r,%a) }
n488=    else { write %w $read(%r,%a) }
n489=    inc %a
n490=  }
n491=}
n492=
n493=
n494=alias jb.sort { var %l = 2 | write -c $+($prodir,playlist.txt) | while ($did(mp3,18,%l).text) { write $+($prodir,playlist.txt) $right($gettok($did(mp3,18,%l).text,1,9),$iif($did(mp3,18,%l).text == $did(mp3,18).seltext,-12,-10)) $chr(9) $right($gettok($did(mp3,18,%l).text,2,9),$iif($did(mp3,18,%l).text == $did(mp3,18).seltext,-10,-9)) | inc %l } }
n495=on *:mp3end:{ if ($rcon(mp3,shuffle) == on) { mp3.shuf } }
n496=alias jb.chng1 { if ( $did(mp3,18).seltext == $did(mp3,18,$calc($rcon(mp3,play) + 1)) ) { return -12 } | else { return -10 } }
n497=alias jb.chng2 { if ( $did(mp3,18).seltext == $did(mp3,18,$calc($rcon(mp3,play) - 1)) ) { return -12 } | else { return -10 } }
n498=alias jb.mp3 { return $right($gettok($did(18,$calc($rcon(mp3,play) + $1)),2,9),-9) $+ $right($gettok($did(18,$calc($rcon(mp3,play) + $1)),1,9),$iif($2 == 1,$jb.chng1,$jb.chng2)) }
n499=
n500=alias mp3.play { 
n501=  if ($1 == ps) { $wcon(mp3,play,$calc($rcon(mp3,play) +  $2)) | .splay $3- }
n502=  elseif ($1 == -s) { .splay $right($gettok($did(mp3,18).seltext,2,9),-9) $+ $right($gettok($did(mp3,18).seltext,1,9),-12)) | $wcon(mp3,stat,play) | $wcon(mp3,play,$did($dname,18).sel) }
n503=  elseif ($1 == -s2) { .splay $right($gettok($did(mp3,18).seltext,2,9),-9) $+ $right($gettok($did(mp3,18).seltext,1,9),-12)) | $wcon(mp3,stat,play) | $wcon(mp3,play,$did($dname,18).sel) }
n504=  else { .splay $1- | $wcon(mp3,stat,play) | $wcon(mp3,play,$calc(%rand + 2)) | unset %rand }
n505=  if ($rcon(mp3,scrollname) == on) { sc_start mp3 1 28 l  $rcon(mp3,scrolltime) $+($remove($nopath($insong.fname),.mp3),$chr(32),***,$chr(32)) } 
n506=  else   {  did -ra mp3 1 $remove($nopath($insong.fname),.mp3) }
n507=}
n508=alias jb.text return $right($gettok($did(mp3,18).seltext,1,9),-12)) $chr(9) $right($gettok($did(mp3,18).seltext,2,9),-9) 
n509=on *:dialog:mp3:dclick:*:{ if ($did == 18) { mp3.play -s } }
n510=;$gettok($read($+($prodir,playlist.txt),%rand),2,9) $+ $gettok($read($+($prodir,playlist.txt),%rand),1,9)
n511=alias mp3.shuf { set %rand $rand(0,$calc($lines($+($prodir,playlist.txt)) - 1)) | mp3.play $gettok($read($+($prodir,playlist.txt),$calc(%rand + 1)),2,9) $+ $gettok($read($+($prodir,playlist.txt),$calc(%rand + 1)),1,9) }
n512=alias mp3.test { did -c mp3 18 $1 | mp3.play -s2 }
n513=
n514=alias mp3.misc { wdialog mp3_misc }
n515=dialog mp3_misc {
n516=  title "mp3 misc opt"
n517=  size -1 -1 214 58
n518=  icon system\images\mp3.ico, 0
n519=  option pixels
n520=  check "Scroll Song name", 1, 7 9 126 20
n521=  edit "", 2, 55 30 100 22
n522=  text "ms", 3, 161 37 50 16
n523=}
n524=on *:dialog:mp3_misc:init:0:{
n525=  if ($rcon(mp3,scrollname) == on) did -c $dname 1
n526=  did -ra $dname 2 $rcon(mp3,scrolltime)
n527=}
n528=on *:dialog:mp3_misc:*:*:{
n529=  if ($devent == sclick) { $wcon(mp3,scrollname,$iif($did(1).state == 1,on,off)) }
n530=  if ($devent == edit) { $wcon(mp3,scrolltime,  $iif(!$did(2),500,$did(2))   ) }
n531=}
n532=
n533=
n534=;###########
n535=;UPDATER
n536=;##############
n537=alias addons.pop {
n538=  if ($1 == begin) || ($1 == end) return -
n539=  if ($script(ie.hsa)) { set %addons $addtok(%addons,webExplorer:ie,169)  } | else { set %addons $remtok(%addons,webExplorer:ie,169) }
n540=  if ($script(notepad.hsa)) { set %addons $addtok(%addons,Notepad:notepad,169)  } | else { set %addons $remtok(%addons,Notepad:notepad,169) }
n541=  if ($script(prime.hsa))  { set %addons $addtok(%addons,prime,169)  } | else { set %addons $remtok(%addons,prime,169) }
n542=  if ($script(pa.hsa)) { set %addons $addtok(%addons,PA System:pa,169) } | else { set %addons $remtok(%addons,PA System:pa,169) }
n543=  if ($script(ag.hsa)) { set %addons $addtok(%addons,Auto Greet:ag,169) } | else { set %addons $remtok(%addons,Auto Greet:ag,169) }
n544=
n545=
n546=  return $gettok(%addons,$1,169)
n547=
n548=}
n549=
n550=
n551=alias update { $wdialog(update) | sockclose update | sockclose addon | sockopen update www.webproficio.com 80  }
n552=dialog update {
n553=  title "Updater [/updater]"
n554=  size -1 -1 385 215
n555=  icon system\images\update.ico, 0
n556=  list 6, 11 8 361 18, size
n557=  list 5, 4 43 377 168, hide size
n558=  list 4, 4 43 377 168, hide size
n559=  button "Button", 3, 140 56 75 25, hide ok
n560=  box "", 1, 5 -3 375 40
n561=  box "exp", 2, 4 43 377 168
n562=}
n563=on *:dialog:update:*:*:{
n564=  if ($devent == sclick) {  if ($did == 6) { var %a = $gettok($did($dname,6).seltext,3,9) | if (%a) %a }  }
n565=  if ($devent == init) {
n566=    mdx.fonts $dname 2,1,3,4,98,5,6,7
n567=    mdx SetControlMDX $dname 4,5 listview labeltip $rcon(display,list.style) rowselect  > $views 
n568=
n569=    did -i $dname 4 1 headerdims 80:1 0:2 0:3 0:4 85:5 200:6
n570=    did -i $dname 4 1 headertext Object $+ $chr(9) $+ file $+ $chr(9) $+ vers $+ $chr(9)  $+ id $+ $chr(9) $+ Name $+ $chr(9) $+ Description
n571=    var %i = did -i $dname 4 1 seticon list 
n572=    %i system\images\about.ico 
n573=    %i system\images\addon.ico
n574=    %i system\images\themes.ico
n575=
n576=    did -i $dname 5 1 headerdims 100:1 0:2 265:3
n577=    did -i $dname 5 1 headertext Object $+ $chr(9) $+ URL $+ $chr(9) $+ Info
n578=    did -i $dname 5 1 seticon list system\images\f.ico
n579=
n580=    var %hwnd = $dll($nhtml,find,exp) 
n581=    dll $nhtml attach %hwnd
n582=    dll $nhtml navigate http://www.webproficio.com/Lika/news_sm.php
n583=    ;---------
n584=    mdx SetControlMDX $dname 6 ToolBar nodivider list flat wrap > $mdbars
n585=    did -i $dname 6 1 pad 10 8 | did -i $dname 6 1 bmpsize 16 16 |  mdx SetBorderStyle 6
n586=    var %d =   did -i $dname 6 1 setimage +nhd icon small 
n587=    %d system\images\about.ico
n588=    %d system\images\update.ico
n589=    %d system\images\f.ico
n590=    did -a $dname 6 +xcg 1 News $+ $chr(9) $+ News $+ $chr(9) $+ show.upd 2 4 5
n591=    did -a $dname 6 +cg 2 Downloads $+ $chr(9) $+ Downloads $+ $chr(9) $+ show.upd 4 2 5
n592=    did -a $dname 6 +cg 3 Links $+ $chr(9) $+ Links $+ $chr(9) $+ show.upd 5 4 2
n593=  }
n594=  if ($devent == dclick) {
n595=    var %o = $right($gettok($did($did).seltext,1,9) ,-12)
n596=    var %u = $right($gettok($did($did).seltext,2,9),-10)
n597=    var %id = $right($gettok($did($did).seltext,4,9),-10)
n598=
n599=
n600=    if ($did == 4) {
n601=      if (%o == VERSION) { url %u }
n602=      if (%o == ADDON) || (%o == THEME) { get.upd %u %id }
n603=    }
n604=    if ($did == 5) {   if (%u) { url %u } }
n605=
n606=  }
n607=}
n608=;==========
n609=on *:sockopen:update:{ 
n610=  $iif(!$dialog(update),$wdialog(update))
n611=  if ($sockerr) { dialog -t update Updater [/update] - Error1 | halt } 
n612=  dialog -t update Updater [/update] - Connecting...
n613=  sockwrite -n $sockname GET /Lika/update.txt HTTP/1.1
n614=  sockwrite -n $sockname Host: www.webproficio.com
n615=  sockwrite -n $sockname $crlf
n616=}
n617=
n618=on *:sockread:update:{
n619=  if ($sockerr) { dialog -t update Updater [/update] - Error2 | halt } 
n620=  if ($dialog(update))  dialog -t update Updater [/update] - Connected!
n621=  sockread %update | tokenize 169 %update
n622=  if ($1 == VERSION) && ($Lika(vers) < $3) did -a update 4 0 1 $1 $chr(9) $2 $chr(9) $3 $chr(9) $4 $chr(9) $5 $chr(9) $6
n623=  if ($1 == ADDON) && ($addon(read,$2,2) < $3) did -a update 4 0 2 $1 $chr(9) $2 $chr(9) $3 $chr(9) $4 $chr(9) $5 $chr(9) $6
n624=  if ($1 == THEME) && ($addon(read,$2,2) < $3) did -a update 4 0 3 $1 $chr(9) $2 $chr(9) $3 $chr(9) $4 $chr(9) $5 $chr(9) $6
n625=  ;object fname vers id name desc
n626=
n627=  if ($1 == URL) did -a update 5 0 1 $2 $chr(9) $3 $chr(9) $4
n628=  .timer 1 5 unset %update
n629=  unset %u*
n630=}
n631=alias show.upd { did -v update $1 | did -h update $replace($2-,$chr(32),$chr(44)) }
n632=on *:sockclose:update:if ($dialog(update)) dialog -t update Updater [/update] - Finished!
n633=
n634=;==========
n635=
n636=
n637=alias get.upd {
n638=  if (!$dialog(get.upd)) { $wdialog(get.upd) }
n639=  if (!$sock(addon).name) { sockopen addon www.webproficio.com 80 | sockmark addon $1 | if ($2) { sockopen addon2 www.webproficio.com 80 | sockmark addon2 $2 } }
n640=}
n641=on *:sockopen:addon:{
n642=  if ($sockerr) { derror Error Error1 downloading addon. Please Try again later. | sockclose addon | halt } 
n643=  if ($isfile(system\addons\ $+ $sock($sockname).mark)) { .remove system\addons\ $+ $sock($sockname).mark }
n644=  set %addon.ticks $calc($ticks / 1000) | set %addon.rcvd $sock($sockname).rcvd
n645=  did -ra get.upd 2 Receiving:     $sock(addon).mark
n646=  sockwrite -n $sockname GET $+(/Lika/addons/,$sock($sockname).mark) HTTP/1.1
n647=  sockwrite -n $sockname Accept: */*
n648=  sockwrite -n $sockname Host: www.webproficio.com
n649=  sockwrite $sockname $crlf
n650=}
n651=
n652=on *:sockopen:addon2:{
n653=  sockwrite -n $sockname GET $+(/Lika/addons/addons.php?upd=,$sock($sockname).mark) HTTP/1.1
n654=  sockwrite -n $sockname Accept: */*
n655=  sockwrite -n $sockname Host: www.webproficio.com
n656=  sockwrite $sockname $crlf
n657=}
n658=on *:sockread:addon2:{
n659=  sockread %header2 | tokenize 32 %header2
n660=  sockclose addon2
n661=  unset %header2
n662=}
n663=
n664=
n665=;=======
n666=
n667=
n668=on *:sockread:addon:{ 
n669=  if ($sockerr) { derror Error Error2 downloading addon. Please Try again later. | sockclose $sockname | halt  } 
n670=  var %update = $sock($sockname).mark
n671=  if (%addon != 1) {
n672=    var %header |  sockread %header | tokenize 32 %header
n673=    if ($1 == HTTP/1.1) { if ($2 != 200) && ($2 != 206) {  derror Error Error downloading addon. Please Try again later. | sockclose $sockname | halt } }
n674=    elseif (Content-Len* iswm $1) { if ($dialog(get.upd)) { did -ra get.upd 4 Size: $lower($bytes($2).suf) } | set %addon.size $2 }
n675=    elseif (!$1) { %addon = 1 | break }
n676=  }
n677=  else {
n678=    var %x = $+(system\addons\,%update)
n679=    :loop
n680=    sockread &a
n681=    if (!$sockbr) { return }
n682=    bwrite $+(",%x,") -1 &a
n683=    var %pct = $round($calc($file(%x).size / %addon.size * 100),1)
n684=    if ($dialog(get.upd)) {  did -ra get.upd 5 Percent Done: %pct $+ % | did -ra get.upd 3 $calc(%pct * 10) 0 1000  }
n685=    if (    $file(%x).size < %addon.size ) { goto loop }
n686=    else { sockclose addon | .timerADDON off | did -v get.upd 99 | did -ra get.upd 99 Close | unset %addon* | $iif($did($dname,9).state == 1,dialog -k $dname) }
n687=  }
n688=}
n689=
n690=
n691=alias addon.refresh {
n692=  var %x = $+(system\addons\,$sock(addon).mark)
n693=  if ($dialog(get.upd)) { 
n694=    var %pct = $round($calc($file(%x).size / %addon.size * 100),1)
n695=    if (%addon.ticks) { var %speed = $calc( ($file(%x).size - %addon.rcvd) / (($ticks / 1000) - %addon.ticks)) }
n696=    set %addon.ticks $calc($ticks / 1000) | set %addon.rcvd $file(%x).size
n697=    did -ra get.upd 6 Transfer Rate: $bytes(%speed).suf
n698=    dialog -t get.upd Downloading File - %pct $+ %
n699=    did -ra get.upd 7 Time remaining: $duration( $calc( ( %addon.size - $file(%x).size) / %speed ) ) 
n700=    did -ra get.upd 3 $calc(%pct * 10) 0 1000
n701=    did -ra get.upd 8 $bytes($file(%x).size).suf of $bytes(%addon.size).suf
n702=  }
n703=  else { .timerADDON off }
n704=}
n705=;==========
n706=dialog get.upd {
n707=  title "Downloading File"
n708=  size -1 -1 304 163
n709=  box "", 1, 4 0 298 126
n710=  text "Receiving: ?????????", 2, 15 16 215 16
n711=  text "pbar", 3, 14 35 277 18
n712=  text "Size: ???", 4, 15 61 90 16
n713=  text "Percent Done: ???%", 5, 165 101 125 16
n714=  text "Transfer Rate: ????", 6, 15 101 123 16
n715=  text "Time Remaining: ", 7, 15 81 280 16
n716=  button "Cancel", 99, 227 133 75 25, ok
n717=  button "Positioner", 98, 154 2 13 16, hide
n718=  text "?? of ??", 8, 165 61 120 16
n719=  check "Close on Complete", 9, 15 135 111 20
n720=}
n721=on *:dialog:get.upd:init:*: {  
n722=  .timerADDON 0 1 addon.refresh
n723=  mdx SetControlMDX $dname 98 positioner noclose > $mddlg 
n724=  mdx.fonts $dname 2,4,5,6,7,8 | mdx.buttons $dname 99
n725=  mdx SetControlMDX %dg 3 ProgressBar smooth > $mdgen
n726=  did -ra $dname 3 barcolor $rgb(69,117,151)
n727=  addon.refresh
n728=}
n729=on *:dialog:get.upd:sclick:99:{ if ($sock(fdl).name) { .remove %fdl.path $+ $parseurl($sock(fdl).mark).file2 | sockclose fdl | unset %fdl* } | if ($sock(addon).name) { .remove system\addons\ $+ $sock(addon).mark  | sockclose addon | unset %addon* } }
n730=
n731=
n732=;==========
n733=
n734=;###########
n735=;COLOR SELECTOR
n736=;##############
n737=alias colors { 
n738=  if ($1 == lag) { $wdialog2(lagcolor,color) | return }
n739=  if ($1 == tbschmH) { $wdialog2(tbschmH,color) | return }
n740=  if ($1 == tbschmS) { $wdialog2(tbschmS,color) | return }
n741=  if ($1 == tbbg) { $wdialog2(tbbgcolor,color) }
n742=  else { $wdialog(color) | if ($1-) { set %color.d $1 | set %color.com $2 | set %color.2 $3 }  | $iif($4,set %color.rgb $rgb($4)) }
n743=}
n744=
n745=alias rgbcolors $wdialog(color)
n746=;alias color rgbcolors
n747=dialog color {
n748=  title "Color [/colors]"
n749=  icon system\images\colors.ico,0
n750=  size -1 -1 282 210
n751=  box "", 1, 6 4 271 95
n752=  text "Red:", 2, 17 26 23 16
n753=  edit "", 4, 224 22 40 22, autohs limit 3
n754=  edit "", 7, 224 44 40 22, autohs limit 3
n755=  edit "", 10, 224 66 40 22, autohs limit 3
n756=  scroll "", 3, 60 23 160 16, range 255 horizontal bottom
n757=  text "Green:", 5, 17 50 32 16
n758=  scroll "", 6, 60 46 160 16, range 255 horizontal bottom
n759=  text "Blue:", 8, 17 73 24 16
n760=  scroll "", 9, 60 69 160 16, range 255 horizontal bottom
n761=  button "Ok", 99, 11 181 75 25, ok
n762=  box "", 12, 6 100 154 74
n763=  text "Decimal:", 13, 17 122 41 16
n764=  edit "", 14, 68 116 80 22, autohs read 
n765=  text "HTML:", 15, 17 145 33 16
n766=  edit "", 16, 68 140 80 22, autohs read
n767=  list 17, 166 105 111 70, size
n768=  text $name, 100, 205 187 37 16
n769=  button "", 98, 11 181 75 25, hide
n770=
n771=}
n772=;##### TB BG COLOR
n773=;##### TB BG COLOR
n774=on *:dialog:tbbgcolor:scroll:3:{ load.rgb $dname }
n775=on *:dialog:tbbgcolor:scroll:6:{ load.rgb  $dname }
n776=on *:dialog:tbbgcolor:scroll:9:{ load.rgb $dname  }
n777=on *:dialog:tbbgcolor:init:0:{ 
n778=  mdx.fonts $dname 1,2,4,7,10,5,8,99,12,13,14,15,16,100,98
n779=  mdx.buttons $dname 99
n780=  mdx SetControlMDX $dname 17 ListView icon > $views
n781=  set %color.rgb $rgb($rcon(display,tb.bgcolor))
n782=  ;mdx SetControlMDX color 98 positioner noclose > $mddlg 
n783=  .timer 1 0 load.rgb $dname
n784=}
n785=on *:dialog:tbbgcolor:edit:*:{
n786=  if ($did == 4) { if ($did(4) isnum) { did -c $dname 3 $did(4) | load.rgb $dname } }
n787=  if ($did == 7) { if ($did(7) isnum) { did -c $dname 6 $did(7) | load.rgb $dname } }
n788=  if ($did == 10) { if ($did(10) isnum) { did -c $dname 9 $did(10) | load.rgb $dname  } }
n789=}
n790=on *:dialog:tbbgcolor:sclick:99:{ 
n791=  var %r = $did($dname,3).sel,%g = $did($dname,6).sel,%b = $did($dname,9).sel 
n792=  var %rgb = $+(%r,$chr(44),%g,$chr(44),%b)
n793=  var %dec = $rgb( [ %rgb ) ]
n794=  $wcon(display,tb.bgcolor,%dec) | did -i main 31 1 setbkg color %dec
n795=}
n796=
n797=;##### TB SCHEME HIGHLIGHT COLOR
n798=;##### TB SCHEME HIGHLIGHT COLOR
n799=
n800=on *:dialog:tbschmH:scroll:3:{ load.rgb $dname }
n801=on *:dialog:tbschmH:scroll:6:{ load.rgb  $dname }
n802=on *:dialog:tbschmH:scroll:9:{ load.rgb $dname  }
n803=on *:dialog:tbschmH:init:0:{ 
n804=  mdx.fonts $dname 1,2,4,7,10,5,8,99,12,13,14,15,16,100,98
n805=  mdx.buttons $dname 99
n806=  mdx SetControlMDX $dname 17 ListView icon > $views
n807=  set %color.rgb $rgb($rcon(display,tb.schemeH))
n808=  ;mdx SetControlMDX color 98 positioner noclose > $mddlg 
n809=  .timer 1 0 load.rgb $dname
n810=}
n811=on *:dialog:tbschmH:edit:*:{
n812=  if ($did == 4) { if ($did(4) isnum) { did -c $dname 3 $did(4) | load.rgb $dname } }
n813=  if ($did == 7) { if ($did(7) isnum) { did -c $dname 6 $did(7) | load.rgb $dname } }
n814=  if ($did == 10) { if ($did(10) isnum) { did -c $dname 9 $did(10) | load.rgb $dname  } }
n815=}
n816=on *:dialog:tbschmH:sclick:99:{ 
n817=  var %r = $did($dname,3).sel,%g = $did($dname,6).sel,%b = $did($dname,9).sel 
n818=  var %rgb = $+(%r,$chr(44),%g,$chr(44),%b)
n819=  var %dec = $rgb( [ %rgb ) ]
n820=  $wcon(display,tb.schemeH,%dec) | did -i main 43 1 setbkg color %dec
n821=}
n822=
n823=;##### TB SCHEME SHADOW COLOR
n824=;##### TB SCHEME SHADOW COLOR
n825=
n826=on *:dialog:tbschmS:scroll:3:{ load.rgb $dname }
n827=on *:dialog:tbschmS:scroll:6:{ load.rgb  $dname }
n828=on *:dialog:tbschmS:scroll:9:{ load.rgb $dname  }
n829=on *:dialog:tbschmS:init:0:{ 
n830=  mdx.fonts $dname 1,2,4,7,10,5,8,99,12,13,14,15,16,100,98
n831=  mdx.buttons $dname 99
n832=  mdx SetControlMDX $dname 17 ListView icon > $views
n833=  set %color.rgb $rgb($rcon(display,tb.schemeS))
n834=  ;mdx SetControlMDX color 98 positioner noclose > $mddlg 
n835=  .timer 1 0 load.rgb $dname
n836=}
n837=on *:dialog:tbschmS:edit:*:{
n838=  if ($did == 4) { if ($did(4) isnum) { did -c $dname 3 $did(4) | load.rgb $dname } }
n839=  if ($did == 7) { if ($did(7) isnum) { did -c $dname 6 $did(7) | load.rgb $dname } }
n840=  if ($did == 10) { if ($did(10) isnum) { did -c $dname 9 $did(10) | load.rgb $dname  } }
n841=}
n842=on *:dialog:tbschmS:sclick:99:{ 
n843=  var %r = $did($dname,3).sel,%g = $did($dname,6).sel,%b = $did($dname,9).sel 
n844=  var %rgb = $+(%r,$chr(44),%g,$chr(44),%b)
n845=  var %dec = $rgb( [ %rgb ) ]
n846=  $wcon(display,tb.schemeS,%dec) | did -i main 45 1 setbkg color %dec
n847=}
n848=
n849=
n850=;##### LAG COLOR
n851=;##### LAG COLOR
n852=;##### LAG COLOR
n853=
n854=on *:dialog:lagcolor:scroll:3:{ load.rgb $dname }
n855=on *:dialog:lagcolor:scroll:6:{ load.rgb  $dname }
n856=on *:dialog:lagcolor:scroll:9:{ load.rgb $dname  }
n857=on *:dialog:lagcolor:init:0:{ 
n858=  mdx.fonts $dname 1,2,4,7,10,5,8,99,12,13,14,15,16,100,98
n859=  mdx.buttons $dname 99
n860=  mdx SetControlMDX $dname 17 ListView icon > $views
n861=  set %color.rgb $rgb($rcon(lag,color))
n862=  ;mdx SetControlMDX color 98 positioner noclose > $mddlg 
n863=  .timer 1 0 load.rgb $dname
n864=}
n865=on *:dialog:lagcolor:edit:*:{
n866=  if ($did == 4) { if ($did(4) isnum) { did -c $dname 3 $did(4) | load.rgb $dname } }
n867=  if ($did == 7) { if ($did(7) isnum) { did -c $dname 6 $did(7) | load.rgb $dname } }
n868=  if ($did == 10) { if ($did(10) isnum) { did -c $dname 9 $did(10) | load.rgb $dname  } }
n869=}
n870=on *:dialog:lagcolor:sclick:99:{ 
n871=
n872=  var %r = $did($dname,3).sel,%g = $did($dname,6).sel,%b = $did($dname,9).sel 
n873=  var %rgb = $+(%r,$chr(44),%g,$chr(44),%b)
n874=  var %dec = $rgb( [ %rgb ) ]
n875=
n876=  $wcon(lag,color,%dec) | did -i main 37 1 setbkg color %dec
n877=}
n878=
n879=
n880=;##### color
n881=;##### color
n882=;##### color
n883=
n884=on *:dialog:color:init:0:{ 
n885=  mdx.fonts $dname 1,2,4,7,10,5,8,99,12,13,14,15,16,100,98
n886=  mdx.buttons $dname 99
n887=  mdx SetControlMDX color 17 ListView icon > $views
n888=  ;mdx SetControlMDX color 98 positioner noclose > $mddlg 
n889=  .timer 1 0 load.rgb $dname
n890=}
n891=alias hex2rgb { if ($1) { var %hex = $remove($1,$chr(35)),%r = $calc($hexnum($mid(%hex,1,1)) * 16 + $hexnum($mid(%hex,2,1))),%g = $calc($hexnum($mid(%hex,3,1)) * 16 + $hexnum($mid(%hex,4,1))),%b = $calc($hexnum($mid(%hex,5,1)) * 16 + $hexnum($mid(%hex,6,1))) | return %r $+ , $+ %g $+ , $+ %b } }
n892=alias load.rgb {
n893=  var %d = $1
n894=  if (%color.rgb) { 
n895=    var %a = %color.rgb, %r = $gettok(%a,1,44), %g =  $gettok(%a,2,44), %b = $gettok(%a,3,44)
n896=    did -c %d 3 $gettok(%a,1,44) | did -c %d 6 $gettok(%a,2,44) | did -c %d 9 $gettok(%a,3,44)  
n897=    unset %color.rgb
n898=  }
n899=  else { var %r = $did(%d,3).sel,%g = $did(%d,6).sel,%b = $did(%d,9).sel }
n900=  var %rgb = $+(%r,$chr(44),%g,$chr(44),%b)
n901=  var %dec = $rgb( [ %rgb ) ]
n902=  var %html = $rgb2hex( [ %rgb ) ]
n903=  did -ra %d 4 %r | did -ra %d 7 %g | did -ra %d 10 %b | did -ra %d 14 %dec | did -ra %d 16 %html | did -i %d 17 1 setbkg color %dec
n904=}
n905=alias rgb2hex { return $base($1,10,16,2) $+ $base($2,10,16,2) $+ $base($3,10,16,2) } 
n906=on *:dialog:color:edit:*:{
n907=  if ($did == 4) { if ($did(4) isnum) { did -c $dname 3 $did(4) | load.rgb $dname } }
n908=  if ($did == 7) { if ($did(7) isnum) { did -c $dname 6 $did(7) | load.rgb $dname } }
n909=  if ($did == 10) { if ($did(10) isnum) { did -c $dname 9 $did(10) | load.rgb $dname } }
n910=}
n911=alias jkjk { return %color.com }
n912=alias ghgh { return %color.d }
n913=on *:dialog:color:scroll:3:{ load.rgb $dname }
n914=on *:dialog:color:scroll:6:{ load.rgb  $dname }
n915=on *:dialog:color:scroll:9:{ load.rgb $dname  }
n916=on *:dialog:color:sclick:99:{ if (%color.d) { if ($did(14) == 0) { $wcon($ghgh,$jkjk,00) } | else { $wcon($ghgh,$jkjk,$did(14)) } | if (%color.2) { did -i %color.d $+ color %color.2 1 setbkg color $did(14) } } | unset %color* }
n917=
n918=;###########
n919=;COLOR EDITOR
n920=;##############
n921=alias cpanel.color { $wdialog2(cpanelcolor,colorsetter) }
n922=dialog colorsetter {
n923=  title "Colors" 
n924=  size -1 -1 211 229
n925=  icon system\images\colors.ico,0
n926=  box "Background", 1, 6 5 198 106
n927=  radio "", 2, 15 30 15 20
n928=  edit "", 3, 35 30 138 22, read autohs
n929=  radio "Select a Color:", 4, 15 59 100 20
n930=  radio "No Background", 5, 15 84 100 20
n931=  button "?", 6, 175 31 17 20
n932=  list 7, 139 58 53 22, size extsel
n933=  box "Text", 8, 6 114 198 73
n934=  text "Text Color:", 9, 15 138 51 16
n935=  list 10, 141 134 53 22, size extsel
n936=  text "Text Background:", 11, 16 160 85 16
n937=  button "Set", 98, 9 196 75 25, ok
n938=  button "Cancel", 99, 84 196 75 25, cancel, hide
n939=  text $name, 100, 139 201 37 16, 
n940=  list 13, 141 157 53 22, size extsel
n941=}
n942=on *:dialog:cpanelcolor:init:0:{
n943=  mdx.fonts $dname 1,4,5,8,9,11,98,99,100
n944=  mdx SetControlMDX $dname 7,10,13 ListView icon  > $views 
n945=  did -c $dname $rcon(cpanel,style)
n946=  did -i $dname 7 1 setbkg color $rcon(cpanel,bg)
n947=  did -i $dname 10 1 setbkg color $rcon(cpanel,text)
n948=  did -i $dname 13 1 setbkg color $rcon(cpanel,textbg)
n949=  did -ra $dname 3 $rcon(cpanel,url)
n950=}
n951=on *:dialog:cpanelcolor:sclick:*:{
n952=  if ($did == 7) { colors cpanel bg 7 $rcon(cpanel,bg) }
n953=  if ($did == 10) { colors cpanel text 10 $rcon(cpanel,text) }
n954=  if ($did == 13) { colors cpanel textbg 13 $rcon(cpanel,textbg) }
n955=  if ($did == 98) {  $iif($dialog(cpanel),load.cpanel) }
n956=  if ($did == 6) { did -ra $dname 3 $$sfile($mircdirsystem\images\,Select an Image,Select) | $wcon(cpanel,url,$did(3)) | if ($input(Do you want the Image Tiled?,104,Tiled??) == $yes) { $wcon(cpanel,layout,tile) } | else { $wcon(cpanel,layout,normal) } load.cpanel }
n957=  if ($did == 2) { if ($did($dname,2).state == 1) { $wcon(cpanel,style,2) } }
n958=  if ($did == 4) { if ($did($dname,4).state == 1) { $wcon(cpanel,style,4) } }
n959=  if ($did == 5) { if ($did($dname,5).state == 1) { $wcon(cpanel,style,5) } }
n960=}
n961=
n962=on *:dialog:dcccolor:init:0:{
n963=  mdx.fonts $dname 1,4,5,8,9,11,98,99,100
n964=  did -b $dname 2
n965=  mdx SetControlMDX $dname 7,10,13 ListView icon  > $views 
n966=  did -c $dname $rcon(dcc,style)
n967=  did -i $dname 7 1 setbkg color $rcon(dcc,bg)
n968=  did -i $dname 10 1 setbkg color $rcon(dcc,text)
n969=  did -i $dname 13 1 setbkg color $rcon(dcc,textbg)
n970=  did -ra $dname 3 $rcon(dcc,url)
n971=}
n972=
n973=on *:dialog:dcccolor:sclick:*:{
n974=  if ($did == 7) { colors dcc bg 7 $rcon(dcc,bg) }
n975=  if ($did == 10) { colors dcc text 10 $rcon(dcc,text) }
n976=  if ($did == 13) { colors dcc textbg 13 $rcon(dcc,textbg) }
n977=  if ($did == 98) {  $iif($dialog(transfers),load.dcc) }
n978=  if ($did == 6) { did -ra $dname 3 $$sfile($mircdirsystem\images\,Select an Image,Select) | $wcon(dcc,url,$did(3)) | if ($input(Do you want the Image Tiled?,104,Tiled??) == $yes) { $wcon(dcc,layout,tile) } | else { $wcon(dcc,layout,normal) } load.dcc }
n979=  if ($did == 2) { if ($did($dname,2).state == 1) { $wcon(dcc,style,2) } }
n980=  if ($did == 4) { if ($did($dname,4).state == 1) { $wcon(dcc,style,4) } }
n981=  if ($did == 5) { if ($did($dname,5).state == 1) { $wcon(dcc,style,5) } }
n982=}
n983=on *:dialog:notifycolor:init:0:{
n984=  mdx.fonts $dname 1,4,5,8,9,11,98,99,100
n985=  did -b $dname 2
n986=  mdx SetControlMDX $dname 7,10,13 ListView icon  > $views 
n987=  did -c $dname $rcon(notify,style)
n988=  did -i $dname 7 1 setbkg color $rcon(notify,bg)
n989=  did -i $dname 10 1 setbkg color $rcon(notify,text)
n990=  did -i $dname 13 1 setbkg color $rcon(notify,textbg)
n991=  did -ra $dname 3 $rcon(notify,url)
n992=}
n993=
n994=on *:dialog:notifycolor:sclick:*:{
n995=  if ($did == 7) { colors notify bg 7 $rcon(notify,bg) }
n996=  if ($did == 10) { colors notify text 10 $rcon(notify,text) }
n997=  if ($did == 13) { colors notify textbg 13 $rcon(notify,textbg) }
n998=  if ($did == 98) {  $iif($dialog(notify),load.notify) }
n999=  if ($did == 6) { did -ra $dname 3 $$sfile($mircdirsystem\images\,Select an Image,Select) | $wcon(notify,url,$did(3)) | if ($input(Do you want the Image Tiled?,104,Tiled??) == $yes) { $wcon(notify,layout,tile) } | else { $wcon(notify,layout,normal) } load.notify }
n1000=  if ($did == 2) { if ($did($dname,2).state == 1) { $wcon(notify,style,2) } }
n1001=  if ($did == 4) { if ($did($dname,4).state == 1) { $wcon(notify,style,4) } }
n1002=  if ($did == 5) { if ($did($dname,5).state == 1) { $wcon(notify,style,5) } }
n1003=}
n1004=
n1005=
n1006=on *:dialog:mp3color:init:0:{
n1007=  mdx.fonts $dname 1,4,5,8,9,11,98,99,100
n1008=  did -b $dname 2
n1009=  mdx SetControlMDX $dname 7,10,13 ListView icon  > $views 
n1010=  did -c $dname $rcon(notify,style)
n1011=  did -i $dname 7 1 setbkg color $rcon(mp3,bg)
n1012=  did -i $dname 10 1 setbkg color $rcon(mp3,text)
n1013=  did -i $dname 13 1 setbkg color $rcon(mp3,textbg)
n1014=  did -ra $dname 3 $rcon(notify,url)
n1015=}
n1016=
n1017=on *:dialog:mp3color:sclick:*:{
n1018=  if ($did == 7) { colors mp3 bg 7 $rcon(mp3,bg) }
n1019=  if ($did == 10) { colors mp3 text 10 $rcon(mp3,text) }
n1020=  if ($did == 13) { colors mp3 textbg 13 $rcon(mp3,textbg) }
n1021=  if ($did == 98) {  $iif($dialog(mp3),jb.time) }
n1022=  if ($did == 6) { did -ra $dname 3 $$sfile($mircdirsystem\images\,Select an Image,Select) | $wcon(mp3,url,$did(3)) | if ($input(Do you want the Image Tiled?,104,Tiled??) == $yes) { $wcon(mp3,layout,tile) } | else { $wcon(mp3,layout,normal) } jb.time }
n1023=  if ($did == 2) { if ($did($dname,2).state == 1) { $wcon(mp3,style,2) } }
n1024=  if ($did == 4) { if ($did($dname,4).state == 1) { $wcon(mp3,style,4) } }
n1025=  if ($did == 5) { if ($did($dname,5).state == 1) { $wcon(mp3,style,5) } }
n1026=}
n1027=
n1028=
n1029=
n1030=
n1031=;###########
n1032=;CONTROL PANEL EDITOR
n1033=;##############
n1034=
n1035=alias cpe cpanel.edit
n1036=alias cpanel.edit { $wdialog(cpanel.edit) }
n1037=dialog cpanel.edit {
n1038=  title "Control Panel Editor [/cpe]"
n1039=  size -1 -1 377 278
n1040=  icon system\images\cpanel.ico, 0
n1041=  list 2, 7 5 364 155, size extsel
n1042=  box "", 8, 7 160 263 115
n1043=  text "Description:", 15, 20 248 80 16
n1044=  edit "", 10, 102 177 160 22, autohs
n1045=  text "Command:", 13, 20 226 50 15
n1046=  edit "", 12, 102 199 141 22, autohs
n1047=  button "?", 19, 244 200 17 20
n1048=  text "Icon:", 11, 20 204 24 16
n1049=  edit "", 14, 102 221 160 22, autohs
n1050=  text "Name:", 9, 20 183 31 16
n1051=  edit "", 16, 102 242 160 22, autohs
n1052=  box "", 17, 277 160 94 115
n1053=  button "5", 3, 286 173 38 25
n1054=  button "6", 4, 323 173 38 25
n1055=  button "Change", 20, 286 197 75 25
n1056=  button "New", 22, 286 221 75 25
n1057=  button "Add", 25, 286 221 75 25, hide
n1058=  button "Delete", 23, 286 245 75 25
n1059=  button "Button", 1, 4 1 13 15, hide ok
n1060=}
n1061=on *:dialog:cpanel.edit:init:0:{
n1062=  mdx.fonts $dname 2,8,9,16,11,14,13,12,15,10,17,20,22,25,23,19
n1063=  mdx SetFont $dname 3,4 + 20 500 WebDings
n1064=  mdx.buttons $dname 20,22,25,23,19,3
n1065=  mdx SetControlMDX $dname 2 listview icon smallicons alignleft rowselect showsel single labeltip $rcon(display,list.style) > $views 
n1066=  did -i $dname 2 1 headerdims 75:1 75:2 75:3 85:4
n1067=  did -i $dname 2 1 headertext Name $+ $chr(9) $+ Icon $+ $chr(9) $+ Command $+ $chr(9) $+ Info
n1068=  did -b $dname 10,12,14,16,20
n1069=  cpanel.all
n1070=}
n1071=
n1072=alias cpanel.all {
n1073=  did -i cpanel.edit 2 1 clearicons list | did -r $dname 2
n1074=  var %c = 1,%d = $+($prodir,cpanel.txt)
n1075=  while ($read(%d,%c)) {
n1076=    var %b = $read(%d,%c)
n1077=    did -i cpanel.edit 2 1 seticon list 0 $gettok(%b,2,169)
n1078=    did -a cpanel.edit 2 0 + %c 1 1 $gettok(%b,1,169) $chr(9) $gettok(%b,2,169) $chr(9) $gettok(%b,3,169) $chr(9) $gettok(%b,4,169) 
n1079=    inc %c
n1080=  }
n1081=}
n1082=on *:dialog:cpanel.edit:sclick:*:{
n1083=  var %c = $calc($did($dname,2).sel - 1),%d = $+($prodir,cpanel.txt),%t = $read $+(-l,%c) %d
n1084=  if ($did == 3) { if ($did($dname,2).sel isnum) { set %c.temp %t | write -dl $+ %c %d | write $+(-il,$calc(%c - 1)) %d %c.temp  | cpanel.all | did -c $dname 2 $calc(%c) | unset %c.temp } }
n1085=  if ($did == 4) { if ($did($dname,2).sel isnum) { set %c.temp %t | write -dl $+ %c %d | write $+(-il,$calc(%c + 1)) %d %c.temp | cpanel.all | did -c $dname 2 $calc(%c + 2) | unset %c.temp } }
n1086=  if ($did == 2) { did -e $dname 20 | did -era $dname 10 $gettok(%t,1,169) | did -era $dname 12 $gettok(%t,2,169)  | did -era $dname 14 $gettok(%t,3,169) | did -era $dname 16 $gettok(%t,4,169) }
n1087=  if ($did == 20) { write -l $+ %c %d $+($did(10),$chr(169),$did(12),$chr(169),$did(14),$chr(169),$did(16)) | did -r $dname 2 | $cpanel.all | did -br $dname 10,12,14,16 | did -b $dname 20 }
n1088=  if ($did == 22) { did -er $dname 10,12,14,16 | did -b $dname 2,3,4,20,23 | did -h $dname 22 | did -v $dname 25 }
n1089=  if ($did == 25) { if ($did(10)) && ($did(12)) && ($did(14)) && ($did(16)) { did -h $dname 25 |  did -v $dname 22 | did -e $dname 2,3,4,20,23 | write %d $+($did(10),©,$did(12),©,$did(14),©,$did(16)) | did -r $dname 2 | $cpanel.all | did -br $dname 10,12,14,16 | did -b $dname 20 } | else { derror Error Please verify that all editboxes are complete } }
n1090=  if ($did == 19) { did -ra $dname 12 $$sfile($mircdirsystem\images\,Select an Icon,Select) }
n1091=  if ($did == 23) { if ($did($dname,2).sel isnum) { write -dl $+ %c $+($prodir,cpanel.txt) | did -r $dname 2 | $cpanel.all | did -br $dname 10,12,14,16 | did -b $dname 20 } }
n1092=}
n1093=
n1094=;###########
n1095=;CONTROL PANEL
n1096=;##############
n1097=
n1098=dialog cpanel {
n1099=  title "Control Panel [/cpanel]"
n1100=  ;option dbu
n1101=  size -1 -1 330 270
n1102=  icon system\images\cpanel.ico,0
n1103=  menu "&File", 149
n1104=  item "Reset", 165, 149
n1105=  item break, 166, 149
n1106=  item "Refresh", 157, 149
n1107=  item "Close", 150, 149
n1108=  menu "&View", 158
n1109=  item "Large", 159, 158
n1110=  item "Small", 160, 158
n1111=  item "List", 161, 158
n1112=  item "Details", 162, 158
n1113=  menu "&Edit", 151
n1114=  item "Colors", 152, 151
n1115=  item "Icons", 153, 151
n1116=  menu "&Help", 154
n1117=  item "Tips", 155, 154
n1118=  item "Help", 156, 154
n1119=  item break, 163, 154
n1120=  item "About", 164, 154
n1121=  list 1, 0 0 240 177, size extsel
n1122=  list 2, 0 177 242 22, size
n1123=  button "",3,1 1 1 1, cancel hide
n1124=  button "",4,1 1 1 1, ok hide
n1125=  button "Positioner", 5, 1 1 1 1, hide 
n1126=}
n1127=
n1128=on *:dialog:cpanel:init:0:{
n1129=  mdx.fonts $dname 1,2
n1130=  did -c $dname $rcon(cpanel,liststyle)
n1131=  dialog -s $dname $rcon(cpanel,xpos) $rcon(cpanel,ypos) $rcon(cpanel,cw) $rcon(cpanel,ch)
n1132=  mdx SetDialog $dname style title border sysmenu minbox
n1133=  mdx SetControlMDX cpanel 1 listview $cpanel.list > $views
n1134=  mdx SetControlMDX cpanel 5 positioner maxbox minbox size > $mddlg 
n1135=  ;  mdx SetFont $dname 1,2 +b 13 100 Tahoma
n1136=  mdx SetBorderStyle $dname 1,2 staticedge
n1137=  did -i $dname 1 1 headerdims 120:1 225:2
n1138=  did -i $dname 1 1 headertext Name $+ $chr(9) $+ Description
n1139=  mdx SetControlMDX $dname 2 StatusBar > $mdbars
n1140=  load.cpanel
n1141=  cpanel.list
n1142=
n1143=
n1144=}
n1145=ON *:DIALOG:cpanel:menu:159,160,161,162:{
n1146=  did -u $dname 159,160,161,162
n1147=  did -c $dname $did
n1148=  mdx SetMDXStyle cpanel 1 $cpanel.list
n1149=  $wcon(cpanel,liststyle,$did)
n1150=}
n1151=on *:dialog:cpanel:menu:*:{ 
n1152=  if ($did == 165) { var %v = $input(Are you Sure you want to Reset the Cpanel to Default Icons?,296,title,text) | if (%v == $yes) { .copy -o system\profiles\cpanel_copy.txt $+($prodir,cpanel.txt) } } 
n1153=  if ($did == 150) { dialog -x cpanel }
n1154=  if ($did == 152) { cpanel.color }
n1155=  if ($did == 153) { cpanel.edit }
n1156=  if ($did == 155) { tips }
n1157=  if ($did == 164) { about }
n1158=  if ($did == 156) { help }
n1159=  if ($did == 157) { did -r $dname 1 | set %cpanel.t $ticks | .timer56 1 0 load.cpanel | did -i $dname 2 2 +b Loading, please wait... }
n1160=}
n1161=ON *:DIALOG:cpanel:sclick:5:{
n1162=  var %w = $dialog($dname).cw,%h = $dialog($dname).ch
n1163=  if ($istok(size minimize maximize restore,$gettok($did($dname,$did),1,32),32)) {
n1164=    mdx MoveControl $dname 1 * * $calc(%w - 1) $calc(%h - 25)
n1165=    mdx MoveControl $dname 2 * $calc(%h - 22) %w *
n1166=  }
n1167=  $wcon(cpanel,cw,%w) | $wcon(cpanel,ch,$calc(%h + 19)) 
n1168=  $wcon(cpanel,xpos,$dialog($dname).x) | $wcon(cpanel,ypos,$dialog($dname).y) 
n1169=  ; echo aaaa %w //// %h
n1170=}
n1171=
n1172=; did -i $dname 2 1 1 seticon small $gettok($cpanel.read.2,2,169) | 
n1173=on *:dialog:cpanel:sclick:*:{ var %d = $+($prodir,cpanel.txt) | var %s = $calc($did(cpanel,1).sel - 1) |  if ($did == 1) { if ($did(cpanel,1).sel) { did -i $dname 2 2 +b %s $gettok($read(%d,%s),4,169) } } }
n1174=on *:dialog:cpanel:dclick:*:{ if ($did == 1) { if ($did(cpanel,1).sel) { $gettok($read($+($prodir,cpanel.txt),$calc($did(cpanel,1).sel - 1)),3,169) } } }
n1175=
n1176=alias cpanel.list { 
n1177=  var %c = showsel single autoarrange
n1178=  if ($did($dname,162).state) { var %c = %c report rowselect nosortheader }
n1179=  elseif ($did($dname,160).state) { var %c = %c icon smallicon }
n1180=  elseif ($did($dname,161).state) { var %c = %c list }
n1181=  else { var %c = %c icon }
n1182=  return %c 
n1183=}
n1184=alias cpanel { set %cpanel.t $ticks | $wdialog(cpanel)  }
n1185=alias load.cpanel {
n1186=  var %d = $+($prodir,cpanel.txt),%c = 1
n1187=  did -r cpanel 1 | did -i cpanel 1 1 clearicons list
n1188=  while ($read(%d,%c)) {
n1189=    var %b = $read(%d,%c)
n1190=    did -i cpanel 1,2 1 seticon list %c, $+ $gettok(%b,2,169) 
n1191=    did -a cpanel 1 0 + %c 1  $gettok(%b,1,169) $chr(9) $gettok(%b,4,169) 
n1192=    inc %c
n1193=  }
n1194=  var %l = $lines($+($prodir,cpanel.txt))
n1195=  set %ticks $ticks
n1196=  balloon Loaded > Successfully loaded the Control Panel in $+($round($calc((%ticks - %cpanel.t) / 1000),2),secs..) 
n1197=  did -i cpanel 2 2 +b 0 %l $+(object,$iif(%l > 1,s)) loaded in $+($round($calc((%ticks - %cpanel.t) / 1000),2),secs..)
n1198=  var %j = $rcon(cpanel,style)
n1199=  if (%j == 2) { did -i cpanel 1 1 setbkg url $rcon(cpanel,layout) $rcon(cpanel,url) }
n1200=  elseif (%j == 4) { did -i cpanel 1 1 setbkg color $rcon(cpanel,bg) }
n1201=  elseif (%j == 5) { did -i cpanel 1 1 setbkg none }
n1202=  did -i cpanel 1 1 settxt color $rcon(cpanel,text)
n1203=  did -i cpanel 1 1 settxt bgcolor $rcon(cpanel,textbg)
n1204=  unset %cpanel.t | unset %ticks
n1205=}
